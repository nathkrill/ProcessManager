apply plugin: 'idea'
apply plugin: 'java'
apply plugin: 'war'

sourceCompatibility = JavaVersion.VERSION_1_7
targetCompatibility = JavaVersion.VERSION_1_7

configurations {
    apiCompile
    main {
        extendsFrom apiCompile
    }
}

sourceSets {
    api {
        java {
            srcDir 'src/api'
        }
    }
    main {
        java {
            srcDir 'src/main'
        }
        compileClasspath = compileClasspath + files(api.runtimeClasspath)
    }
}

task tomcatRun(dependsOn: ["classes"]) {
    group='web application'
    description = "Do everything needed to be able to run as embedded tomcat"
}

jar {
    from sourceSets.api.output
    from sourceSets.main.output
}

/*
tomcat {
    contextPath='/PEUserMessageHandler'
}
*/
dependencies {
    apiCompile "org.apache.tomcat:servlet-api:${tomcatVersion}"
    apiCompile project(':DarwinJavaApi')
    apiCompile project(':PE-common')

    compile 'com.google.gwt:gwt-user:2.6.1'
    compile project(':DarwinClients')
}